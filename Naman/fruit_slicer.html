<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />

<title>Naman Mittal â€“ Fruit Slicer Game</title>

<!--
Author: Naman Mittal
Single-file version (HTML + CSS + JS)
Refactored & bundled into one file
-->

<!-- jQuery + jQuery UI -->
<link
  rel="stylesheet"
  href="https://ajax.googleapis.com/ajax/libs/jqueryui/1.12.1/themes/smoothness/jquery-ui.css"
/>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>
<script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.11.4/jquery-ui.min.js"></script>

<style>
html {
  height: 100%;
  background: radial-gradient(circle, #fff, rgb(189, 182, 182));
  background-image: url(https://raw.githubusercontent.com/Saumya-07/Fruit-Slicer/master/images/bg3%20-%20Copy.jpg);
  background-size: cover;
  font-family: cursive, sans-serif;
}

#container {
  width: 750px;
  height: 600px;
  margin: 10px auto;
  padding: 20px;
  border-radius: 10px;
  position: relative;
}

#instructions {
  width: 450px;
  height: 50px;
  margin: 10px auto;
  font-size: 30px;
  background-color: #d3901d;
  color: #2e1d11;
  text-align: center;
  line-height: 50px;
  border-radius: 20px;
  box-shadow: 0px 4px 0px #775012;
}

#fruitcontainer {
  background: url(https://raw.githubusercontent.com/Saumya-07/Fruit-Slicer/master/images/wood-bg2.jpg);
  background-size: cover;
  width: 650px;
  height: 450px;
  padding: 10px;
  margin: 30px auto 20px auto;
  overflow: hidden;
  border-radius: 20px;
  box-shadow: 0px 4px 0px #4b4b4e;
  position: relative;
}

#front {
  font-size: 40px;
  color: #d3901d;
  width: 650px;
  height: 450px;
  margin: 30px auto;
  display: none;
  z-index: 2;
}

#front img {
  width: 280px;
}

.fruit {
  display: none;
  position: absolute;
}

#score {
  display: none;
}

.scoreDisplay {
  display: flex;
  position: absolute;
  font-size: 30px;
  color: #888e61;
}

#score img {
  width: 40px;
  padding-right: 5px;
}

#trialsleft {
  position: absolute;
  left: 550px;
  display: flex;
}

.life {
  width: 30px;
  padding-right: 5px;
}

#startReset {
  width: 120px;
  padding: 10px;
  margin: 0 auto;
  cursor: pointer;
  text-align: center;
  background-color: #8d8315;
  box-shadow: 0px 4px 0px #5c5619;
  border-radius: 5px;
}

#startReset:active {
  background-color: #69620c;
  box-shadow: 0px 0px #5c5619;
  top: 4px;
  color: white;
}

#gameOver {
  width: 500px;
  height: 300px;
  color: #d3901d;
  text-align: center;
  font-size: 3em;
  position: absolute;
  top: 170px;
  left: 150px;
  z-index: 2;
}
</style>
</head>

<body>

<div id="container">

  <div id="instructions">Slice Fruits</div>

  <div id="fruitcontainer">

    <div id="score">
      <div class="scoreDisplay">
        <img src="https://raw.githubusercontent.com/Saumya-07/Fruit-Slicer/master/images/scr.png">
        <span id="scoreValue">0</span>
      </div>
    </div>

    <div id="trialsleft"></div>

    <div id="front">
      Are you ready for the ultimate slice action?
      <br>
      <img src="https://raw.githubusercontent.com/Saumya-07/Fruit-Slicer/master/images/splash.png">
    </div>

    <img id="fruit1" class="fruit">
  </div>

  <div id="startReset">Start Game</div>
  <div id="gameOver"></div>

</div>

<audio id="slicesound">
  <source src="https://github.com/Saumya-07/Fruit-Slicer/raw/master/audio/slicefruit.mp3">
</audio>

<script>
let playing = false;
let score = 0;
let trialsleft;
let step;
let action;
const fruits = ["1","2","3","4","5","6","7","8","9","10"];

$(function () {

  $("#front").show();

  $("#startReset").click(function () {
    if (playing) {
      location.reload();
    } else {
      playing = true;
      score = 0;
      $("#scoreValue").html(score);
      $("#score").show();
      $("#front").hide();

      trialsleft = 3;
      $("#trialsleft").show();
      addHearts();

      $("#gameOver").hide();
      $(this).html("Reset Game");

      startAction();
    }
  });

  $("#fruit1").mouseover(function () {
    score++;
    $("#scoreValue").html(score);
    $("#slicesound")[0].play();

    clearInterval(action);
    $("#fruit1").hide("explode", 500);
    setTimeout(startAction, 500);
  });

  function addHearts() {
    $("#trialsleft").empty();
    for (let i = 0; i < trialsleft; i++) {
      $("#trialsleft").append(
        '<img src="https://raw.githubusercontent.com/Saumya-07/Fruit-Slicer/master/images/wrong.png" class="life">'
      );
    }
  }

  function startAction() {
    $("#fruit1").show();
    chooseFruit();
    $("#fruit1").css({
      left: Math.round(550 * Math.random()),
      top: -50
    });

    step = 1 + Math.round(5 * Math.random());

    action = setInterval(function () {
      $("#fruit1").css("top", $("#fruit1").position().top + step);

      if ($("#fruit1").position().top > $("#fruitcontainer").height()) {
        if (trialsleft > 1) {
          trialsleft--;
          addHearts();
          startAction();
        } else {
          playing = false;
          $("#score").hide();
          $("#trialsleft").hide();
          $("#gameOver").html(
            "<p>Game Over!</p><p>Your score is " + score + "</p>"
          ).show();
          clearInterval(action);
        }
      }
    }, 10);
  }

  function chooseFruit() {
    $("#fruit1").attr(
      "src",
      "https://raw.githubusercontent.com/Saumya-07/Fruit-Slicer/master/images/" +
      fruits[Math.floor(Math.random() * fruits.length)] +
      ".png"
    );
  }

});
</script>

</body>
</html>
